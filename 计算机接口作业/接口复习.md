# 1. 单选题

1. 下面所列<font color=" #ff0000 ">进行地址运算</font>不属于系统总线接口功能。
2. 串行总线与并行总线比较，则<font color="#ff0000">并行总线成本高，速度快</font>

3. 当 `8255` 的 `A` 口工作于方式 `2` 时，B 口可以工作于  <font color="#ff0000">方式 0 和方式 1 都可以</font>。

4. 并行接口 `8255` 的端口地址范围为: `0FFFCH-0FFFFH`，则其中 B 口的地址为<font color=" #ff0000 ">0FFFDH</font>

5. 已知 `8255` 的 PA 端口设置为方式 0，输出端口；PB 端口设置为方式 0，输入端口；PC 端口设置为方式 0，输出端口。 8255 端口地址为 `288～28BH`。执行下面的指令实现的操作是<font color="#ff0000">PC5 输出低电平</font>

```armasm
MOV DX，28BH
MOV AL，0AH
OUT DX，AL
```

6. 已知 `8251` 的端口地址为 `284H-285H`。若 `8251` 按异步方式传送，数据格式为：7 位数据位，1 位停止位，偶校验，波特率为 `5000b/s`，波特率因子为 `16`，`8251` 的工作方式字是<font color=" #ff0000 ">7AH</font>

7. `8253` 定时/计数器是 <font color="#ff0000">16</font> 位的

8. 已知 `8253` 定时 / 计数器 `1 `的输入频率 CLK1 为 `1.5`MHz，若要求 OUT1 产生 1KHz 的方波信号，则其计数初值为 <font color="#ff0000">1500</font>

9. 下面对于 8253 工作方式 5 的描述比较准确的是 <font color="#ff0000">8253 工作方式 5 是硬件触发选通方式，单次低电平输出，低电平持续时间等于时钟周期；其高电平持续时间由计数初值决定</font>

10. <font color="#ff0000">DMA 方式</font> 最适合于 I/O 设备和存储器之间大量数据的传输。

11. `8259` 初始化时，`ICW2` 设置内容为 83H，那么该 `8259` 的 `IR7` 对应的中断类型号为<font color="#ff0000">87H</font>

12. 如果开放中断控制器 `8259` 的外部中断源 `IR2` 和 `IR4`，其它中断源屏蔽，则 `OCW1` 命令字的内容是<font color="#ff0000">11101011B</font>

13. 某处理器采用两片 `8259` 芯片级联对中断进行扩展，从片连接至主片 `IR3`，那么 `ICW3` 应如何设置？<font color="#ff0000">主片：08H，从片：03H</font>

14. `8259A` 在上电初始化之后，为防止与操作命令字 OCW 冲突，ICW 命令流程的原则是<font color="#ff0000">不会冲突，可按需多次执行</font>

15. 甲乙两机进行异步通信，要求传送 ASCII 字符，偶校验，两位停止位，传输速率为 `1200b/s`，`TxC` 和 `RxC` 的时钟频率为 19200Hz，`8251A` 的方式命令字  <font color="#ff0000">FAH</font>

# 2. 填空题

1. 已知某 `D/A` 转换器的位数是 `10` 位（bit)，分辨率约为 <font color="#ff0000">0.1</font>%。

2. 能够用 IN/OUT 指令对其进行读 / 写操作的寄存器称为<font color="#ff0000">端口</font>。

3. 把系统中所有的中断向量集中起来，按中断类型号从小到大的顺序放到存储器的某一个区域内，这个存放中断向量的存储区叫<font color="#ff0000">中断向量表</font>。

4. 计数器的门控信号 `GATE` 的作用是由<font color="#ff0000">高</font>变<font color="#ff0000">低</font>使计数器开始计数。

5. DMA 方式是在 <font color=" #ff0000 ">主存</font> 和 <font color=" #ff0000 ">外设</font> 之间建立直接的数据传输通路。

# 3. 判断题

1. CPU 在每条指令结束后会检查是否由中断发生，CPU 检查的顺序为: NMI 中断 ->INTR 中断 -> 内部中断 -> 单步中断（<font color="#ff0000">×</font>）

2. 假设某 I/O 接口芯片内有 32 个端口（32 个地址），则该接口芯片的片内地址线至少要有 3 根。（<font color="#ff0000">×</font>）

3. 8253 的方式 3 是软件触发的选通方式，即单次低电平输出，低电平持续时间等于 CLK 时钟周期。（<font color="#ff0000">×</font>）

4. 可编程并行接口芯片 8255 可以通过对 C 端口控制字的操作，使 PC0 输出高电平，也可以通过对 PC 数据端口的操作使 PC0 输出高电平。（<font color="#ff0000">×</font>）

# 4. 问答题

1. **请阐述接口电路的一般结构**。

   - <font color=" #ff0000 ">接外设侧</font>，在接外设侧的接口电路中，主要包括数据寄存器、状态寄存器和控制寄存器。数据寄存器：用于暂时存放输入（来自于外设的）或输出（CPU 写给外设的）的数据；状态寄存器：用于暂时存放外设的工作状态信息，供 CPU 进行查询（或向 CPU 申请的中断信息等），状态寄存器中的内容一般是只读的；控制寄存器：用于暂时存放 CPU 发给外设的控制命令，如接口的工作方式命令字，控制寄存器是写寄存器，只能写入，不能读出。

   - <font color=" #ff0000 ">接 CPU 侧</font>，在接 CPU 侧的接口电路中，主要包括总线驱动、地址译码和控制逻辑等。总线驱动器：用于实现速度配合和满足驱动能力的需要；地址译码器：用于实现对内部寄存器的寻址；控制逻辑电路：包括读写控制信号、复位信号等。

   - 上述的接口电路一般结构，并不是所有的接口都含有，但数据寄存器、地址译码、控制逻辑是必须的。

# 5. 综合应用题

1.<font color=" #e36c09 ">请根据 8259A 的内部逻辑结构图:</font>  
> 1 补充图中各字母代表的模块名称。  
> 2 并解释 `IMR` 代表的意义  
> 3 简述 `IR0-IR7` 作用及优先级; 以及信号 `INT` 的特性和作用。

![](https://pan.lmio.xyz/pic/e3a9dd0003814264381ad4bc9b5f9674.png)

<font color=" #ff0000 ">A</font>: 数据总线缓冲器

<font color=" #ff0000 ">B</font>：读写控制逻辑

<font color=" #ff0000 ">C</font>: 级联缓冲比较器

<font color=" #ff0000 ">D</font>：中断服务寄存器

<font color=" #ff0000 ">E</font>: 优先权判别电路 

<font color=" #ff0000 ">F</font>: 中断请求寄存器

<font color=" #ff0000 ">IMR</font>：中断屏蔽寄存器

<font color=" #ff0000 ">IR0-IR7</font> 是中断请求，用于接收从外设来的中断请求信号。优先级从 `IR0` 到 `IR7` 递减。

<font color=" #ff0000 ">INT</font>：中断响应信号，高电平有效。用于由 `8259A` 向 CPU 发中断请求。此引脚连接 CPU 的可屏蔽中断请求输入端 `INTR`。

2. <font color="#e36c09">8255A 是应用广泛的典型可编程并行 I/O 接口芯片</font>

   >1）此芯片有哪些控制信号？各有何功能？  
   >2）假设控制端口地址为 23BH。 
   >要求如下：`A` 口设定方式 `0` 输出，`B` 口方式 `0` 输入，`C` 口高 `4` 位输出，低 4 位输入。请针对该应用，编写初始化程序。

![](https://pan.lmio.xyz/pic/04cfa2f7fef5c1701dbf84b5eb40dac4.png)

   - <font color=" #ff0000 ">片选信号</font>，与 `A0`，`A1` 一起确定其端口地址；读信号，控制 `8255A` 送出数据或状态信息至 CPU；写信号，控制 CPU 输出的数据或命令到 `8255A`；复位信号，清除控制寄存器和将所有端口设置成输入方式。

   - <font color=" #ff0000 ">方式控制字</font>：`1000 0011

```armasm
MOV DX, 21BH 

MOV AL, 83H 

OUT DX, AL 
```

3. <font color="#e36c09">某系统中使用可编程串行接口芯片 8251A 工作在异步方式</font>，`8` 位数字，带奇校验，两位停止位，数据传送速率是为 300b/s，`TxC` 和 `RxC` 的时钟频率为 19200Hz，允许发送和接收，错误位全部复位。假设其控制端口地址为 229H，数据口地址为 228H，请<font color="#ff0000">编写初始化程序</font>。

![](https://pan.lmio.xyz/pic/3051476aa628a116b3abe7c34ec425a9.png)

   <font color=" #ff0000 ">波特率系数</font>为：19200/300=64

```armasm
MOV  DX, 229H 

MOV  AL, DFH              ; 即 11011111B 

OUT  DX, AL 

MOV  AL, 15H              ; 即 00010101B 

OUT  DX, AL     
```

4. <font color="#e36c09">某系统使用可编程串行接口芯片 8253</font>，其端口地址为 100H-103H，要求从计数器 1 的输出端 OUT1 得到 300Hz 的方波信号，从计数器 2 的输出端 OUT2，得到 10Hz 的单拍负脉冲信号。已知系统提供的计数脉冲频率为 90KHz，计数方式均采用二进制计数方式，试编写初始化此 8253 的程序段。

![](https://pan.lmio.xyz/pic/0c784d0e1e2d9e345a003c4fb24ab291.png)

   <font color=" #ff0000 ">计数初值</font>＝分频系数＝ fclk／fout  ，假定 OUT1 作为 CLK2 输入，则：

   <font color=" #ff0000 ">计数器 </font>1： N ＝ fclk1／fout1 ＝ 90000/300 = 300，十六进制数为 12CH。

   <font color=" #ff0000 ">计数器 2</font>： N ＝ fclk2／fout2 ＝ 300/10 = 30，16 进制数为 1EH。

   <font color=" #ff0000 ">初始化程序</font>：

```armasm
MOV DX, 103H  ; 写计数器 1 控制字 01110110B 

MOV AL, 76H 

OUT DX, AL 

MOV DX, 101H  ; 写计数器 1 计数初值低 8 位 

MOV AL, 02CH 

OUT DX,AL 

MOV AL,01H  ; 写计数器 1 计数初值高 8 位 

OUT DX, AL 

MOV DX, 103H  ; 写计数器 2 控制字 10010100B 

MOV AL, 94H 

OUT DX, AL 

MOV DX, 102H ; 写计数器 2 计数初值 

MOV AL, 1EH 

OUT DX, AL

```